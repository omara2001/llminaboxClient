import{k as Lr,C as Br,$ as Dt,L as Ze,f as Be,_ as Ie,a0 as Pt,r as j,M as Or,a as Mr,j as z,w as $r,i as kr,e as Fr,ae as Ae,J as Y,g as pe,a6 as et,a7 as tt,a9 as zr,a8 as _e,X as Qe,aa as xt,ac as jr,af as Ur}from"./assets/Close-DN9kNrtJ.js";function Hr(n){return Lr("MuiCircularProgress",n)}Br("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Yr=["className","color","disableShrink","size","style","thickness","value","variant"];let Me=n=>n,St,Tt,Ct,Rt;const me=44,Vr=Dt(St||(St=Me`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Wr=Dt(Tt||(Tt=Me`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Gr=n=>{const{classes:s,variant:d,color:g,disableShrink:w}=n,y={root:["root",d,`color${Be(g)}`],svg:["svg"],circle:["circle",`circle${Be(d)}`,w&&"circleDisableShrink"]};return kr(y,Hr,s)},Xr=Ze("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,s)=>{const{ownerState:d}=n;return[s.root,s[d.variant],s[`color${Be(d.color)}`]]}})(({ownerState:n,theme:s})=>Ie({display:"inline-block"},n.variant==="determinate"&&{transition:s.transitions.create("transform")},n.color!=="inherit"&&{color:(s.vars||s).palette[n.color].main}),({ownerState:n})=>n.variant==="indeterminate"&&Pt(Ct||(Ct=Me`
      animation: ${0} 1.4s linear infinite;
    `),Vr)),Qr=Ze("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,s)=>s.svg})({display:"block"}),qr=Ze("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,s)=>{const{ownerState:d}=n;return[s.circle,s[`circle${Be(d.variant)}`],d.disableShrink&&s.circleDisableShrink]}})(({ownerState:n,theme:s})=>Ie({stroke:"currentColor"},n.variant==="determinate"&&{transition:s.transitions.create("stroke-dashoffset")},n.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:n})=>n.variant==="indeterminate"&&!n.disableShrink&&Pt(Rt||(Rt=Me`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Wr)),Kr=j.forwardRef(function(s,d){const g=Or({props:s,name:"MuiCircularProgress"}),{className:w,color:y="primary",disableShrink:p=!1,size:I=40,style:A,thickness:C=3.6,value:_=0,variant:v="indeterminate"}=g,E=Mr(g,Yr),B=Ie({},g,{color:y,disableShrink:p,size:I,thickness:C,value:_,variant:v}),R=Gr(B),N={},D={},O={};if(v==="determinate"){const S=2*Math.PI*((me-C)/2);N.strokeDasharray=S.toFixed(3),O["aria-valuenow"]=Math.round(_),N.strokeDashoffset=`${((100-_)/100*S).toFixed(3)}px`,D.transform="rotate(-90deg)"}return z.jsx(Xr,Ie({className:$r(R.root,w),style:Ie({width:I,height:I},D,A),ownerState:B,ref:d,role:"progressbar"},O,E,{children:z.jsx(Qr,{className:R.svg,ownerState:B,viewBox:`${me/2} ${me/2} ${me} ${me}`,children:z.jsx(qr,{className:R.circle,style:N,ownerState:B,cx:me,cy:me,r:(me-C)/2,fill:"none",strokeWidth:C})})}))}),Jr=(n={})=>{var s,d,g;return{config:n,chats:((s=n.session)==null?void 0:s.chats)||[],chatid:((d=n.session)==null?void 0:d.chatId)||Math.random().toString().substring(2,12),messages:[{role:"api",content:((g=n.assistant)==null?void 0:g.welcomeMessage)||"Hello! How can I assist you today?",timestamp:new Date().toLocaleString(),uploads:[]}],online:!1,error:"",isApiTyping:!1,isUserTyping:!1}},Lt=j.createContext(null),Zr=({children:n,config:s})=>{const[d,g]=Fr(tn,Jr(s));return z.jsx(Lt.Provider,{value:[d,g],children:n})},en=()=>{const n=j.useContext(Lt);if(!n)throw new Error("useContextData must be used within a ContextProvider");return n},tn=(n,s)=>{switch(s.type){case"SET_CONFIG":n.config=s.payload;break;case"ADD_MESSAGE":n.messages.push(s.payload);break;case"SET_ONLINE_STATUS":n.online=s.payload;break;case"SET_ERROR":n.error=s.payload;break;case"SET_API_TYPING":n.isApiTyping=s.payload;break;case"SET_USER_TYPING":n.isUserTyping=s.payload;break;case"CLEAR_CHAT":n.messages=[],n.chatid=Math.random().toString().substring(2,12),localStorage.setItem("chatid",n.chatid);break}};function Ne(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rn={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(n,s){(function(d){n.exports=d()})(function(){return function d(g,w,y){function p(C,_){if(!w[C]){if(!g[C]){var v=typeof Ne=="function"&&Ne;if(!_&&v)return v(C,!0);if(I)return I(C,!0);var E=new Error("Cannot find module '"+C+"'");throw E.code="MODULE_NOT_FOUND",E}var B=w[C]={exports:{}};g[C][0].call(B.exports,function(R){var N=g[C][1][R];return p(N||R)},B,B.exports,d,g,w,y)}return w[C].exports}for(var I=typeof Ne=="function"&&Ne,A=0;A<y.length;A++)p(y[A]);return p}({1:[function(d,g,w){(function(y){var p=y.MutationObserver||y.WebKitMutationObserver,I;if(p){var A=0,C=new p(R),_=y.document.createTextNode("");C.observe(_,{characterData:!0}),I=function(){_.data=A=++A%2}}else if(!y.setImmediate&&typeof y.MessageChannel<"u"){var v=new y.MessageChannel;v.port1.onmessage=R,I=function(){v.port2.postMessage(0)}}else"document"in y&&"onreadystatechange"in y.document.createElement("script")?I=function(){var D=y.document.createElement("script");D.onreadystatechange=function(){R(),D.onreadystatechange=null,D.parentNode.removeChild(D),D=null},y.document.documentElement.appendChild(D)}:I=function(){setTimeout(R,0)};var E,B=[];function R(){E=!0;for(var D,O,S=B.length;S;){for(O=B,B=[],D=-1;++D<S;)O[D]();S=B.length}E=!1}g.exports=N;function N(D){B.push(D)===1&&!E&&I()}}).call(this,typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(d,g,w){var y=d(1);function p(){}var I={},A=["REJECTED"],C=["FULFILLED"],_=["PENDING"];g.exports=v;function v(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,m!==p&&N(this,m)}v.prototype.catch=function(m){return this.then(null,m)},v.prototype.then=function(m,M){if(typeof m!="function"&&this.state===C||typeof M!="function"&&this.state===A)return this;var T=new this.constructor(p);if(this.state!==_){var b=this.state===C?m:M;B(T,b,this.outcome)}else this.queue.push(new E(T,m,M));return T};function E(m,M,T){this.promise=m,typeof M=="function"&&(this.onFulfilled=M,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}E.prototype.callFulfilled=function(m){I.resolve(this.promise,m)},E.prototype.otherCallFulfilled=function(m){B(this.promise,this.onFulfilled,m)},E.prototype.callRejected=function(m){I.reject(this.promise,m)},E.prototype.otherCallRejected=function(m){B(this.promise,this.onRejected,m)};function B(m,M,T){y(function(){var b;try{b=M(T)}catch(L){return I.reject(m,L)}b===m?I.reject(m,new TypeError("Cannot resolve promise with itself")):I.resolve(m,b)})}I.resolve=function(m,M){var T=D(R,M);if(T.status==="error")return I.reject(m,T.value);var b=T.value;if(b)N(m,b);else{m.state=C,m.outcome=M;for(var L=-1,H=m.queue.length;++L<H;)m.queue[L].callFulfilled(M)}return m},I.reject=function(m,M){m.state=A,m.outcome=M;for(var T=-1,b=m.queue.length;++T<b;)m.queue[T].callRejected(M);return m};function R(m){var M=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof M=="function")return function(){M.apply(m,arguments)}}function N(m,M){var T=!1;function b(G){T||(T=!0,I.reject(m,G))}function L(G){T||(T=!0,I.resolve(m,G))}function H(){M(L,b)}var W=D(H);W.status==="error"&&b(W.value)}function D(m,M){var T={};try{T.value=m(M),T.status="success"}catch(b){T.status="error",T.value=b}return T}v.resolve=O;function O(m){return m instanceof this?m:I.resolve(new this(p),m)}v.reject=S;function S(m){var M=new this(p);return I.reject(M,m)}v.all=P;function P(m){var M=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=m.length,b=!1;if(!T)return this.resolve([]);for(var L=new Array(T),H=0,W=-1,G=new this(p);++W<T;)K(m[W],W);return G;function K(ee,se){M.resolve(ee).then(le,function(J){b||(b=!0,I.reject(G,J))});function le(J){L[se]=J,++H===T&&!b&&(b=!0,I.resolve(G,L))}}}v.race=k;function k(m){var M=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=m.length,b=!1;if(!T)return this.resolve([]);for(var L=-1,H=new this(p);++L<T;)W(m[L]);return H;function W(G){M.resolve(G).then(function(K){b||(b=!0,I.resolve(H,K))},function(K){b||(b=!0,I.reject(H,K))})}}},{1:1}],3:[function(d,g,w){(function(y){typeof y.Promise!="function"&&(y.Promise=d(2))}).call(this,typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(d,g,w){var y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function p(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function I(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var A=I();function C(){try{if(!A||!A.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function _(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(o){if(o.name!=="TypeError")throw o;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new t,i=0;i<e.length;i+=1)a.append(e[i]);return a.getBlob(r.type)}}typeof Promise>"u"&&d(3);var v=Promise;function E(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function B(e,r,t){typeof r=="function"&&e.then(r),typeof t=="function"&&e.catch(t)}function R(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function N(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var D="local-forage-detect-blob-support",O=void 0,S={},P=Object.prototype.toString,k="readonly",m="readwrite";function M(e){for(var r=e.length,t=new ArrayBuffer(r),a=new Uint8Array(t),i=0;i<r;i++)a[i]=e.charCodeAt(i);return t}function T(e){return new v(function(r){var t=e.transaction(D,m),a=_([""]);t.objectStore(D).put(a,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),r(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);r(o||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function b(e){return typeof O=="boolean"?v.resolve(O):T(e).then(function(r){return O=r,O})}function L(e){var r=S[e.name],t={};t.promise=new v(function(a,i){t.resolve=a,t.reject=i}),r.deferredOperations.push(t),r.dbReady?r.dbReady=r.dbReady.then(function(){return t.promise}):r.dbReady=t.promise}function H(e){var r=S[e.name],t=r.deferredOperations.pop();if(t)return t.resolve(),t.promise}function W(e,r){var t=S[e.name],a=t.deferredOperations.pop();if(a)return a.reject(r),a.promise}function G(e,r){return new v(function(t,a){if(S[e.name]=S[e.name]||re(),e.db)if(r)L(e),e.db.close();else return t(e.db);var i=[e.name];r&&i.push(e.version);var o=A.open.apply(A,i);r&&(o.onupgradeneeded=function(c){var u=o.result;try{u.createObjectStore(e.storeName),c.oldVersion<=1&&u.createObjectStore(D)}catch(l){if(l.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw l}}),o.onerror=function(c){c.preventDefault(),a(o.error)},o.onsuccess=function(){var c=o.result;c.onversionchange=function(u){u.target.close()},t(c),H(e)}})}function K(e){return G(e,!1)}function ee(e){return G(e,!0)}function se(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,i=e.version>e.db.version;if(a&&(e.version!==r&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function le(e){return new v(function(r,t){var a=new FileReader;a.onerror=t,a.onloadend=function(i){var o=btoa(i.target.result||"");r({__local_forage_encoded_blob:!0,data:o,type:e.type})},a.readAsBinaryString(e)})}function J(e){var r=M(atob(e.data));return _([r],{type:e.type})}function ce(e){return e&&e.__local_forage_encoded_blob}function fe(e){var r=this,t=r._initReady().then(function(){var a=S[r._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return B(t,e,e),t}function de(e){L(e);for(var r=S[e.name],t=r.forages,a=0;a<t.length;a++){var i=t[a];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,K(e).then(function(o){return e.db=o,se(e)?ee(e):o}).then(function(o){e.db=r.db=o;for(var c=0;c<t.length;c++)t[c]._dbInfo.db=o}).catch(function(o){throw W(e,o),o})}function q(e,r,t,a){a===void 0&&(a=1);try{var i=e.db.transaction(e.storeName,r);t(null,i)}catch(o){if(a>0&&(!e.db||o.name==="InvalidStateError"||o.name==="NotFoundError"))return v.resolve().then(function(){if(!e.db||o.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),ee(e)}).then(function(){return de(e).then(function(){q(e,r,t,a-1)})}).catch(t);t(o)}}function re(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function te(e){var r=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var i=S[t.name];i||(i=re(),S[t.name]=i),i.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=fe);var o=[];function c(){return v.resolve()}for(var u=0;u<i.forages.length;u++){var l=i.forages[u];l!==r&&o.push(l._initReady().catch(c))}var f=i.forages.slice(0);return v.all(o).then(function(){return t.db=i.db,K(t)}).then(function(h){return t.db=h,se(t,r._defaultConfig.version)?ee(t):h}).then(function(h){t.db=i.db=h,r._dbInfo=t;for(var x=0;x<f.length;x++){var $=f[x];$!==r&&($._dbInfo.db=t.db,$._dbInfo.version=t.version)}})}function ne(e,r){var t=this;e=R(e);var a=new v(function(i,o){t.ready().then(function(){q(t._dbInfo,k,function(c,u){if(c)return o(c);try{var l=u.objectStore(t._dbInfo.storeName),f=l.get(e);f.onsuccess=function(){var h=f.result;h===void 0&&(h=null),ce(h)&&(h=J(h)),i(h)},f.onerror=function(){o(f.error)}}catch(h){o(h)}})}).catch(o)});return E(a,r),a}function ae(e,r){var t=this,a=new v(function(i,o){t.ready().then(function(){q(t._dbInfo,k,function(c,u){if(c)return o(c);try{var l=u.objectStore(t._dbInfo.storeName),f=l.openCursor(),h=1;f.onsuccess=function(){var x=f.result;if(x){var $=x.value;ce($)&&($=J($));var F=e($,x.key,h++);F!==void 0?i(F):x.continue()}else i()},f.onerror=function(){o(f.error)}}catch(x){o(x)}})}).catch(o)});return E(a,r),a}function ue(e,r,t){var a=this;e=R(e);var i=new v(function(o,c){var u;a.ready().then(function(){return u=a._dbInfo,P.call(r)==="[object Blob]"?b(u.db).then(function(l){return l?r:le(r)}):r}).then(function(l){q(a._dbInfo,m,function(f,h){if(f)return c(f);try{var x=h.objectStore(a._dbInfo.storeName);l===null&&(l=void 0);var $=x.put(l,e);h.oncomplete=function(){l===void 0&&(l=null),o(l)},h.onabort=h.onerror=function(){var F=$.error?$.error:$.transaction.error;c(F)}}catch(F){c(F)}})}).catch(c)});return E(i,t),i}function ge(e,r){var t=this;e=R(e);var a=new v(function(i,o){t.ready().then(function(){q(t._dbInfo,m,function(c,u){if(c)return o(c);try{var l=u.objectStore(t._dbInfo.storeName),f=l.delete(e);u.oncomplete=function(){i()},u.onerror=function(){o(f.error)},u.onabort=function(){var h=f.error?f.error:f.transaction.error;o(h)}}catch(h){o(h)}})}).catch(o)});return E(a,r),a}function Fe(e){var r=this,t=new v(function(a,i){r.ready().then(function(){q(r._dbInfo,m,function(o,c){if(o)return i(o);try{var u=c.objectStore(r._dbInfo.storeName),l=u.clear();c.oncomplete=function(){a()},c.onabort=c.onerror=function(){var f=l.error?l.error:l.transaction.error;i(f)}}catch(f){i(f)}})}).catch(i)});return E(t,e),t}function Ut(e){var r=this,t=new v(function(a,i){r.ready().then(function(){q(r._dbInfo,k,function(o,c){if(o)return i(o);try{var u=c.objectStore(r._dbInfo.storeName),l=u.count();l.onsuccess=function(){a(l.result)},l.onerror=function(){i(l.error)}}catch(f){i(f)}})}).catch(i)});return E(t,e),t}function Ht(e,r){var t=this,a=new v(function(i,o){if(e<0){i(null);return}t.ready().then(function(){q(t._dbInfo,k,function(c,u){if(c)return o(c);try{var l=u.objectStore(t._dbInfo.storeName),f=!1,h=l.openKeyCursor();h.onsuccess=function(){var x=h.result;if(!x){i(null);return}e===0||f?i(x.key):(f=!0,x.advance(e))},h.onerror=function(){o(h.error)}}catch(x){o(x)}})}).catch(o)});return E(a,r),a}function Yt(e){var r=this,t=new v(function(a,i){r.ready().then(function(){q(r._dbInfo,k,function(o,c){if(o)return i(o);try{var u=c.objectStore(r._dbInfo.storeName),l=u.openKeyCursor(),f=[];l.onsuccess=function(){var h=l.result;if(!h){a(f);return}f.push(h.key),h.continue()},l.onerror=function(){i(l.error)}}catch(h){i(h)}})}).catch(i)});return E(t,e),t}function Vt(e,r){r=N.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,i;if(!e.name)i=v.reject("Invalid arguments");else{var o=e.name===t.name&&a._dbInfo.db,c=o?v.resolve(a._dbInfo.db):K(e).then(function(u){var l=S[e.name],f=l.forages;l.db=u;for(var h=0;h<f.length;h++)f[h]._dbInfo.db=u;return u});e.storeName?i=c.then(function(u){if(u.objectStoreNames.contains(e.storeName)){var l=u.version+1;L(e);var f=S[e.name],h=f.forages;u.close();for(var x=0;x<h.length;x++){var $=h[x];$._dbInfo.db=null,$._dbInfo.version=l}var F=new v(function(U,Q){var X=A.open(e.name,l);X.onerror=function(ie){var we=X.result;we.close(),Q(ie)},X.onupgradeneeded=function(){var ie=X.result;ie.deleteObjectStore(e.storeName)},X.onsuccess=function(){var ie=X.result;ie.close(),U(ie)}});return F.then(function(U){f.db=U;for(var Q=0;Q<h.length;Q++){var X=h[Q];X._dbInfo.db=U,H(X._dbInfo)}}).catch(function(U){throw(W(e,U)||v.resolve()).catch(function(){}),U})}}):i=c.then(function(u){L(e);var l=S[e.name],f=l.forages;u.close();for(var h=0;h<f.length;h++){var x=f[h];x._dbInfo.db=null}var $=new v(function(F,U){var Q=A.deleteDatabase(e.name);Q.onerror=function(){var X=Q.result;X&&X.close(),U(Q.error)},Q.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},Q.onsuccess=function(){var X=Q.result;X&&X.close(),F(X)}});return $.then(function(F){l.db=F;for(var U=0;U<f.length;U++){var Q=f[U];H(Q._dbInfo)}}).catch(function(F){throw(W(e,F)||v.resolve()).catch(function(){}),F})})}return E(i,r),i}var Wt={_driver:"asyncStorage",_initStorage:te,_support:C(),iterate:ae,getItem:ne,setItem:ue,removeItem:ge,clear:Fe,length:Ut,key:Ht,keys:Yt,dropInstance:Vt};function Gt(){return typeof openDatabase=="function"}var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xt="~~local_forage_type~",at=/^~~local_forage_type~([^~]+)~/,Ce="__lfsc__:",ze=Ce.length,je="arbf",Ue="blob",it="si08",st="ui08",ct="uic8",ut="si16",lt="si32",ft="ur16",dt="ui32",vt="fl32",ht="fl64",mt=ze+je.length,pt=Object.prototype.toString;function gt(e){var r=e.length*.75,t=e.length,a,i=0,o,c,u,l;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var f=new ArrayBuffer(r),h=new Uint8Array(f);for(a=0;a<t;a+=4)o=ve.indexOf(e[a]),c=ve.indexOf(e[a+1]),u=ve.indexOf(e[a+2]),l=ve.indexOf(e[a+3]),h[i++]=o<<2|c>>4,h[i++]=(c&15)<<4|u>>2,h[i++]=(u&3)<<6|l&63;return f}function He(e){var r=new Uint8Array(e),t="",a;for(a=0;a<r.length;a+=3)t+=ve[r[a]>>2],t+=ve[(r[a]&3)<<4|r[a+1]>>4],t+=ve[(r[a+1]&15)<<2|r[a+2]>>6],t+=ve[r[a+2]&63];return r.length%3===2?t=t.substring(0,t.length-1)+"=":r.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Qt(e,r){var t="";if(e&&(t=pt.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&pt.call(e.buffer)==="[object ArrayBuffer]")){var a,i=Ce;e instanceof ArrayBuffer?(a=e,i+=je):(a=e.buffer,t==="[object Int8Array]"?i+=it:t==="[object Uint8Array]"?i+=st:t==="[object Uint8ClampedArray]"?i+=ct:t==="[object Int16Array]"?i+=ut:t==="[object Uint16Array]"?i+=ft:t==="[object Int32Array]"?i+=lt:t==="[object Uint32Array]"?i+=dt:t==="[object Float32Array]"?i+=vt:t==="[object Float64Array]"?i+=ht:r(new Error("Failed to get type for BinaryArray"))),r(i+He(a))}else if(t==="[object Blob]"){var o=new FileReader;o.onload=function(){var c=Xt+e.type+"~"+He(this.result);r(Ce+Ue+c)},o.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(c){console.error("Couldn't convert value into a JSON string: ",e),r(null,c)}}function qt(e){if(e.substring(0,ze)!==Ce)return JSON.parse(e);var r=e.substring(mt),t=e.substring(ze,mt),a;if(t===Ue&&at.test(r)){var i=r.match(at);a=i[1],r=r.substring(i[0].length)}var o=gt(r);switch(t){case je:return o;case Ue:return _([o],{type:a});case it:return new Int8Array(o);case st:return new Uint8Array(o);case ct:return new Uint8ClampedArray(o);case ut:return new Int16Array(o);case ft:return new Uint16Array(o);case lt:return new Int32Array(o);case dt:return new Uint32Array(o);case vt:return new Float32Array(o);case ht:return new Float64Array(o);default:throw new Error("Unkown type: "+t)}}var Ye={serialize:Qt,deserialize:qt,stringToBuffer:gt,bufferToString:He};function yt(e,r,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function Kt(e){var r=this,t={db:null};if(e)for(var a in e)t[a]=typeof e[a]!="string"?e[a].toString():e[a];var i=new v(function(o,c){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(u){return c(u)}t.db.transaction(function(u){yt(u,t,function(){r._dbInfo=t,o()},function(l,f){c(f)})},c)});return t.serializer=Ye,i}function he(e,r,t,a,i,o){e.executeSql(t,a,i,function(c,u){u.code===u.SYNTAX_ERR?c.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(l,f){f.rows.length?o(l,u):yt(l,r,function(){l.executeSql(t,a,i,o)},o)},o):o(c,u)},o)}function Jt(e,r){var t=this;e=R(e);var a=new v(function(i,o){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){he(u,c,"SELECT * FROM "+c.storeName+" WHERE key = ? LIMIT 1",[e],function(l,f){var h=f.rows.length?f.rows.item(0).value:null;h&&(h=c.serializer.deserialize(h)),i(h)},function(l,f){o(f)})})}).catch(o)});return E(a,r),a}function Zt(e,r){var t=this,a=new v(function(i,o){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){he(u,c,"SELECT * FROM "+c.storeName,[],function(l,f){for(var h=f.rows,x=h.length,$=0;$<x;$++){var F=h.item($),U=F.value;if(U&&(U=c.serializer.deserialize(U)),U=e(U,F.key,$+1),U!==void 0){i(U);return}}i()},function(l,f){o(f)})})}).catch(o)});return E(a,r),a}function bt(e,r,t,a){var i=this;e=R(e);var o=new v(function(c,u){i.ready().then(function(){r===void 0&&(r=null);var l=r,f=i._dbInfo;f.serializer.serialize(r,function(h,x){x?u(x):f.db.transaction(function($){he($,f,"INSERT OR REPLACE INTO "+f.storeName+" (key, value) VALUES (?, ?)",[e,h],function(){c(l)},function(F,U){u(U)})},function($){if($.code===$.QUOTA_ERR){if(a>0){c(bt.apply(i,[e,l,t,a-1]));return}u($)}})})}).catch(u)});return E(o,t),o}function er(e,r,t){return bt.apply(this,[e,r,t,1])}function tr(e,r){var t=this;e=R(e);var a=new v(function(i,o){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){he(u,c,"DELETE FROM "+c.storeName+" WHERE key = ?",[e],function(){i()},function(l,f){o(f)})})}).catch(o)});return E(a,r),a}function rr(e){var r=this,t=new v(function(a,i){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(c){he(c,o,"DELETE FROM "+o.storeName,[],function(){a()},function(u,l){i(l)})})}).catch(i)});return E(t,e),t}function nr(e){var r=this,t=new v(function(a,i){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(c){he(c,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],function(u,l){var f=l.rows.item(0).c;a(f)},function(u,l){i(l)})})}).catch(i)});return E(t,e),t}function or(e,r){var t=this,a=new v(function(i,o){t.ready().then(function(){var c=t._dbInfo;c.db.transaction(function(u){he(u,c,"SELECT key FROM "+c.storeName+" WHERE id = ? LIMIT 1",[e+1],function(l,f){var h=f.rows.length?f.rows.item(0).key:null;i(h)},function(l,f){o(f)})})}).catch(o)});return E(a,r),a}function ar(e){var r=this,t=new v(function(a,i){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(c){he(c,o,"SELECT key FROM "+o.storeName,[],function(u,l){for(var f=[],h=0;h<l.rows.length;h++)f.push(l.rows.item(h).key);a(f)},function(u,l){i(l)})})}).catch(i)});return E(t,e),t}function ir(e){return new v(function(r,t){e.transaction(function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,o){for(var c=[],u=0;u<o.rows.length;u++)c.push(o.rows.item(u).name);r({db:e,storeNames:c})},function(i,o){t(o)})},function(a){t(a)})})}function sr(e,r){r=N.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,i;return e.name?i=new v(function(o){var c;e.name===t.name?c=a._dbInfo.db:c=openDatabase(e.name,"","",0),e.storeName?o({db:c,storeNames:[e.storeName]}):o(ir(c))}).then(function(o){return new v(function(c,u){o.db.transaction(function(l){function f(F){return new v(function(U,Q){l.executeSql("DROP TABLE IF EXISTS "+F,[],function(){U()},function(X,ie){Q(ie)})})}for(var h=[],x=0,$=o.storeNames.length;x<$;x++)h.push(f(o.storeNames[x]));v.all(h).then(function(){c()}).catch(function(F){u(F)})},function(l){u(l)})})}):i=v.reject("Invalid arguments"),E(i,r),i}var cr={_driver:"webSQLStorage",_initStorage:Kt,_support:Gt(),iterate:Zt,getItem:Jt,setItem:er,removeItem:tr,clear:rr,length:nr,key:or,keys:ar,dropInstance:sr};function ur(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function _t(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function lr(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function fr(){return!lr()||localStorage.length>0}function dr(e){var r=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=_t(e,r._defaultConfig),fr()?(r._dbInfo=t,t.serializer=Ye,v.resolve()):v.reject()}function vr(e){var r=this,t=r.ready().then(function(){for(var a=r._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var o=localStorage.key(i);o.indexOf(a)===0&&localStorage.removeItem(o)}});return E(t,e),t}function hr(e,r){var t=this;e=R(e);var a=t.ready().then(function(){var i=t._dbInfo,o=localStorage.getItem(i.keyPrefix+e);return o&&(o=i.serializer.deserialize(o)),o});return E(a,r),a}function mr(e,r){var t=this,a=t.ready().then(function(){for(var i=t._dbInfo,o=i.keyPrefix,c=o.length,u=localStorage.length,l=1,f=0;f<u;f++){var h=localStorage.key(f);if(h.indexOf(o)===0){var x=localStorage.getItem(h);if(x&&(x=i.serializer.deserialize(x)),x=e(x,h.substring(c),l++),x!==void 0)return x}}});return E(a,r),a}function pr(e,r){var t=this,a=t.ready().then(function(){var i=t._dbInfo,o;try{o=localStorage.key(e)}catch{o=null}return o&&(o=o.substring(i.keyPrefix.length)),o});return E(a,r),a}function gr(e){var r=this,t=r.ready().then(function(){for(var a=r._dbInfo,i=localStorage.length,o=[],c=0;c<i;c++){var u=localStorage.key(c);u.indexOf(a.keyPrefix)===0&&o.push(u.substring(a.keyPrefix.length))}return o});return E(t,e),t}function yr(e){var r=this,t=r.keys().then(function(a){return a.length});return E(t,e),t}function br(e,r){var t=this;e=R(e);var a=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return E(a,r),a}function _r(e,r,t){var a=this;e=R(e);var i=a.ready().then(function(){r===void 0&&(r=null);var o=r;return new v(function(c,u){var l=a._dbInfo;l.serializer.serialize(r,function(f,h){if(h)u(h);else try{localStorage.setItem(l.keyPrefix+e,f),c(o)}catch(x){(x.name==="QuotaExceededError"||x.name==="NS_ERROR_DOM_QUOTA_REACHED")&&u(x),u(x)}})})});return E(i,t),i}function Er(e,r){if(r=N.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a=this,i;return e.name?i=new v(function(o){e.storeName?o(_t(e,a._defaultConfig)):o(e.name+"/")}).then(function(o){for(var c=localStorage.length-1;c>=0;c--){var u=localStorage.key(c);u.indexOf(o)===0&&localStorage.removeItem(u)}}):i=v.reject("Invalid arguments"),E(i,r),i}var wr={_driver:"localStorageWrapper",_initStorage:dr,_support:ur(),iterate:mr,getItem:hr,setItem:_r,removeItem:br,clear:vr,length:yr,key:pr,keys:gr,dropInstance:Er},Ir=function(r,t){return r===t||typeof r=="number"&&typeof t=="number"&&isNaN(r)&&isNaN(t)},xr=function(r,t){for(var a=r.length,i=0;i<a;){if(Ir(r[i],t))return!0;i++}return!1},Et=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Ee={},wt={},be={INDEXEDDB:Wt,WEBSQL:cr,LOCALSTORAGE:wr},Sr=[be.INDEXEDDB._driver,be.WEBSQL._driver,be.LOCALSTORAGE._driver],Re=["dropInstance"],Ve=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Re),Tr={description:"",driver:Sr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cr(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function We(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(Et(r[t])?arguments[0][t]=r[t].slice():arguments[0][t]=r[t])}return arguments[0]}var Rr=function(){function e(r){p(this,e);for(var t in be)if(be.hasOwnProperty(t)){var a=be[t],i=a._driver;this[t]=i,Ee[i]||this.defineDriver(a)}this._defaultConfig=We({},Tr),this._config=We({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":y(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in t){if(a==="storeName"&&(t[a]=t[a].replace(/\W/g,"_")),a==="version"&&typeof t[a]!="number")return new Error("Database version must be a number.");this._config[a]=t[a]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,a,i){var o=new v(function(c,u){try{var l=t._driver,f=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){u(f);return}for(var h=Ve.concat("_initStorage"),x=0,$=h.length;x<$;x++){var F=h[x],U=!xr(Re,F);if((U||t[F])&&typeof t[F]!="function"){u(f);return}}var Q=function(){for(var we=function(Dr){return function(){var Pr=new Error("Method "+Dr+" is not implemented by the current driver"),It=v.reject(Pr);return E(It,arguments[arguments.length-1]),It}},Ge=0,Nr=Re.length;Ge<Nr;Ge++){var Xe=Re[Ge];t[Xe]||(t[Xe]=we(Xe))}};Q();var X=function(we){Ee[l]&&console.info("Redefining LocalForage driver: "+l),Ee[l]=t,wt[l]=we,c()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(X,u):X(!!t._support):X(!0)}catch(ie){u(ie)}});return B(o,a,i),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,a,i){var o=Ee[t]?v.resolve(Ee[t]):v.reject(new Error("Driver not found."));return B(o,a,i),o},e.prototype.getSerializer=function(t){var a=v.resolve(Ye);return B(a,t),a},e.prototype.ready=function(t){var a=this,i=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return B(i,t,t),i},e.prototype.setDriver=function(t,a,i){var o=this;Et(t)||(t=[t]);var c=this._getSupportedDrivers(t);function u(){o._config.driver=o.driver()}function l(x){return o._extend(x),u(),o._ready=o._initStorage(o._config),o._ready}function f(x){return function(){var $=0;function F(){for(;$<x.length;){var U=x[$];return $++,o._dbInfo=null,o._ready=null,o.getDriver(U).then(l).catch(F)}u();var Q=new Error("No available storage method found.");return o._driverSet=v.reject(Q),o._driverSet}return F()}}var h=this._driverSet!==null?this._driverSet.catch(function(){return v.resolve()}):v.resolve();return this._driverSet=h.then(function(){var x=c[0];return o._dbInfo=null,o._ready=null,o.getDriver(x).then(function($){o._driver=$._driver,u(),o._wrapLibraryMethodsWithReady(),o._initDriver=f(c)})}).catch(function(){u();var x=new Error("No available storage method found.");return o._driverSet=v.reject(x),o._driverSet}),B(this._driverSet,a,i),this._driverSet},e.prototype.supports=function(t){return!!wt[t]},e.prototype._extend=function(t){We(this,t)},e.prototype._getSupportedDrivers=function(t){for(var a=[],i=0,o=t.length;i<o;i++){var c=t[i];this.supports(c)&&a.push(c)}return a},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,a=Ve.length;t<a;t++)Cr(this,Ve[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ar=new Rr;g.exports=Ar},{3:3}]},{},[4])(4)})})(rn);async function Bt({url:n="",options:s={},retries:d=2,delay:g=2e3,timeout:w=8e3}){const y=new AbortController,{signal:p}=y;s.signal=p;const I=setTimeout(()=>y.abort(),w);return await fetch(n,s).then(async C=>{if(clearTimeout(I),!C.ok)throw new Error(`HTTP error: ${C.status} - ${C.statusText}`);const _=C.headers.get("content-type");return _!=null&&_.includes("json")?await C.json():_!=null&&_.includes("image")||_!=null&&_.includes("video")||_!=null&&_.includes("audio")||_!=null&&_.includes("octet-stream")?await C.blob():await C.text()}).catch(async C=>{if(clearTimeout(I),d>0)return await new Promise(_=>setTimeout(_,g)),Bt({url:n,options:s,retries:d-1,delay:g,timeout:w});throw C})}async function nn(n,s){const d=navigator.onLine;let g=!1;(await Bt({url:n.config.apiHost+"/api/v1/ping"}).catch(y=>{throw new Error(y)})).includes("pong")&&(g=!0),s({type:"SET_ONLINE_STATUS",payload:d&&g})}const on=async(n,s)=>{const d=await fetch(`${n.config.apiHost}/api/v1/public-chatbotConfig/${n.config.chatflowid}`).catch(p=>{throw new Error(`Error fetching chatbot config: ${p}`)});if(!d.ok)throw new Error(`Error fetching chatbot config: ${d.statusText}`);const{uploads:{isSpeechToTextEnabled:g,isImageUploadAllowed:w,isFileUploadAllowed:y}}=await d.json();s({type:"SET_API_ACCEPTING_VOICE",payload:g}),s({type:"SET_API_ACCEPTING_IMAGE",payload:w}),s({type:"SET_API_ACCEPTING_FILES",payload:y})},Se=n=>typeof n=="number"&&!isNaN(n),ye=n=>typeof n=="string",oe=n=>typeof n=="function",Le=n=>ye(n)||oe(n)?n:null,Ke=n=>j.isValidElement(n)||ye(n)||oe(n)||Se(n);function an(n,s,d){d===void 0&&(d=300);const{scrollHeight:g,style:w}=n;requestAnimationFrame(()=>{w.minHeight="initial",w.height=g+"px",w.transition=`all ${d}ms`,requestAnimationFrame(()=>{w.height="0",w.padding="0",w.margin="0",setTimeout(s,d)})})}function $e(n){let{enter:s,exit:d,appendPosition:g=!1,collapse:w=!0,collapseDuration:y=300}=n;return function(p){let{children:I,position:A,preventExitTransition:C,done:_,nodeRef:v,isIn:E,playToast:B}=p;const R=g?`${s}--${A}`:s,N=g?`${d}--${A}`:d,D=j.useRef(0);return j.useLayoutEffect(()=>{const O=v.current,S=R.split(" "),P=k=>{k.target===v.current&&(B(),O.removeEventListener("animationend",P),O.removeEventListener("animationcancel",P),D.current===0&&k.type!=="animationcancel"&&O.classList.remove(...S))};O.classList.add(...S),O.addEventListener("animationend",P),O.addEventListener("animationcancel",P)},[]),j.useEffect(()=>{const O=v.current,S=()=>{O.removeEventListener("animationend",S),w?an(O,_,y):_()};E||(C?S():(D.current=1,O.className+=` ${N}`,O.addEventListener("animationend",S)))},[E]),Y.createElement(Y.Fragment,null,I)}}function At(n,s){return n!=null?{content:n.content,containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,status:s}:{}}const Z=new Map;let Te=[];const Je=new Set,sn=n=>Je.forEach(s=>s(n)),Ot=()=>Z.size>0;function Mt(n,s){var d;if(s)return!((d=Z.get(s))==null||!d.isToastActive(n));let g=!1;return Z.forEach(w=>{w.isToastActive(n)&&(g=!0)}),g}function $t(n,s){Ke(n)&&(Ot()||Te.push({content:n,options:s}),Z.forEach(d=>{d.buildToast(n,s)}))}function Nt(n,s){Z.forEach(d=>{s!=null&&s!=null&&s.containerId?(s==null?void 0:s.containerId)===d.id&&d.toggle(n,s==null?void 0:s.id):d.toggle(n,s==null?void 0:s.id)})}function cn(n){const{subscribe:s,getSnapshot:d,setProps:g}=j.useRef(function(y){const p=y.containerId||1;return{subscribe(I){const A=function(_,v,E){let B=1,R=0,N=[],D=[],O=[],S=v;const P=new Map,k=new Set,m=()=>{O=Array.from(P.values()),k.forEach(b=>b())},M=b=>{D=b==null?[]:D.filter(L=>L!==b),m()},T=b=>{const{toastId:L,onOpen:H,updateId:W,children:G}=b.props,K=W==null;b.staleId&&P.delete(b.staleId),P.set(L,b),D=[...D,b.props.toastId].filter(ee=>ee!==b.staleId),m(),E(At(b,K?"added":"updated")),K&&oe(H)&&H(j.isValidElement(G)&&G.props)};return{id:_,props:S,observe:b=>(k.add(b),()=>k.delete(b)),toggle:(b,L)=>{P.forEach(H=>{L!=null&&L!==H.props.toastId||oe(H.toggle)&&H.toggle(b)})},removeToast:M,toasts:P,clearQueue:()=>{R-=N.length,N=[]},buildToast:(b,L)=>{if((re=>{let{containerId:te,toastId:ne,updateId:ae}=re;const ue=te?te!==_:_!==1,ge=P.has(ne)&&ae==null;return ue||ge})(L))return;const{toastId:H,updateId:W,data:G,staleId:K,delay:ee}=L,se=()=>{M(H)},le=W==null;le&&R++;const J={...S,style:S.toastStyle,key:B++,...Object.fromEntries(Object.entries(L).filter(re=>{let[te,ne]=re;return ne!=null})),toastId:H,updateId:W,data:G,closeToast:se,isIn:!1,className:Le(L.className||S.toastClassName),bodyClassName:Le(L.bodyClassName||S.bodyClassName),progressClassName:Le(L.progressClassName||S.progressClassName),autoClose:!L.isLoading&&(ce=L.autoClose,fe=S.autoClose,ce===!1||Se(ce)&&ce>0?ce:fe),deleteToast(){const re=P.get(H),{onClose:te,children:ne}=re.props;oe(te)&&te(j.isValidElement(ne)&&ne.props),E(At(re,"removed")),P.delete(H),R--,R<0&&(R=0),N.length>0?T(N.shift()):m()}};var ce,fe;J.closeButton=S.closeButton,L.closeButton===!1||Ke(L.closeButton)?J.closeButton=L.closeButton:L.closeButton===!0&&(J.closeButton=!Ke(S.closeButton)||S.closeButton);let de=b;j.isValidElement(b)&&!ye(b.type)?de=j.cloneElement(b,{closeToast:se,toastProps:J,data:G}):oe(b)&&(de=b({closeToast:se,toastProps:J,data:G}));const q={content:de,props:J,staleId:K};S.limit&&S.limit>0&&R>S.limit&&le?N.push(q):Se(ee)?setTimeout(()=>{T(q)},ee):T(q)},setProps(b){S=b},setToggle:(b,L)=>{P.get(b).toggle=L},isToastActive:b=>D.some(L=>L===b),getSnapshot:()=>O}}(p,y,sn);Z.set(p,A);const C=A.observe(I);return Te.forEach(_=>$t(_.content,_.options)),Te=[],()=>{C(),Z.delete(p)}},setProps(I){var A;(A=Z.get(p))==null||A.setProps(I)},getSnapshot(){var I;return(I=Z.get(p))==null?void 0:I.getSnapshot()}}}(n)).current;g(n);const w=j.useSyncExternalStore(s,d,d);return{getToastToRender:function(y){if(!w)return[];const p=new Map;return n.newestOnTop&&w.reverse(),w.forEach(I=>{const{position:A}=I.props;p.has(A)||p.set(A,[]),p.get(A).push(I)}),Array.from(p,I=>y(I[0],I[1]))},isToastActive:Mt,count:w==null?void 0:w.length}}function un(n){const[s,d]=j.useState(!1),[g,w]=j.useState(!1),y=j.useRef(null),p=j.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:I,pauseOnHover:A,closeToast:C,onClick:_,closeOnClick:v}=n;var E,B;function R(){d(!0)}function N(){d(!1)}function D(P){const k=y.current;p.canDrag&&k&&(p.didMove=!0,s&&N(),p.delta=n.draggableDirection==="x"?P.clientX-p.start:P.clientY-p.start,p.start!==P.clientX&&(p.canCloseOnClick=!1),k.style.transform=`translate3d(${n.draggableDirection==="x"?`${p.delta}px, var(--y)`:`0, calc(${p.delta}px + var(--y))`},0)`,k.style.opacity=""+(1-Math.abs(p.delta/p.removalDistance)))}function O(){document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",O);const P=y.current;if(p.canDrag&&p.didMove&&P){if(p.canDrag=!1,Math.abs(p.delta)>p.removalDistance)return w(!0),n.closeToast(),void n.collapseAll();P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}(B=Z.get((E={id:n.toastId,containerId:n.containerId,fn:d}).containerId||1))==null||B.setToggle(E.id,E.fn),j.useEffect(()=>{if(n.pauseOnFocusLoss)return document.hasFocus()||N(),window.addEventListener("focus",R),window.addEventListener("blur",N),()=>{window.removeEventListener("focus",R),window.removeEventListener("blur",N)}},[n.pauseOnFocusLoss]);const S={onPointerDown:function(P){if(n.draggable===!0||n.draggable===P.pointerType){p.didMove=!1,document.addEventListener("pointermove",D),document.addEventListener("pointerup",O);const k=y.current;p.canCloseOnClick=!0,p.canDrag=!0,k.style.transition="none",n.draggableDirection==="x"?(p.start=P.clientX,p.removalDistance=k.offsetWidth*(n.draggablePercent/100)):(p.start=P.clientY,p.removalDistance=k.offsetHeight*(n.draggablePercent===80?1.5*n.draggablePercent:n.draggablePercent)/100)}},onPointerUp:function(P){const{top:k,bottom:m,left:M,right:T}=y.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&n.pauseOnHover&&P.clientX>=M&&P.clientX<=T&&P.clientY>=k&&P.clientY<=m?N():R()}};return I&&A&&(S.onMouseEnter=N,n.stacked||(S.onMouseLeave=R)),v&&(S.onClick=P=>{_&&_(P),p.canCloseOnClick&&C()}),{playToast:R,pauseToast:N,isRunning:s,preventExitTransition:g,toastRef:y,eventHandlers:S}}function ln(n){let{delay:s,isRunning:d,closeToast:g,type:w="default",hide:y,className:p,style:I,controlledProgress:A,progress:C,rtl:_,isIn:v,theme:E}=n;const B=y||A&&C===0,R={...I,animationDuration:`${s}ms`,animationPlayState:d?"running":"paused"};A&&(R.transform=`scaleX(${C})`);const N=pe("Toastify__progress-bar",A?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${E}`,`Toastify__progress-bar--${w}`,{"Toastify__progress-bar--rtl":_}),D=oe(p)?p({rtl:_,type:w,defaultClassName:N}):pe(N,p),O={[A&&C>=1?"onTransitionEnd":"onAnimationEnd"]:A&&C<1?null:()=>{v&&g()}};return Y.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":B},Y.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${E} Toastify__progress-bar--${w}`}),Y.createElement("div",{role:"progressbar","aria-hidden":B?"true":"false","aria-label":"notification timer",className:D,style:R,...O}))}let fn=1;const kt=()=>""+fn++;function dn(n){return n&&(ye(n.toastId)||Se(n.toastId))?n.toastId:kt()}function xe(n,s){return $t(n,s),s.toastId}function Oe(n,s){return{...s,type:s&&s.type||n,toastId:dn(s)}}function De(n){return(s,d)=>xe(s,Oe(n,d))}function V(n,s){return xe(n,Oe("default",s))}V.loading=(n,s)=>xe(n,Oe("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s})),V.promise=function(n,s,d){let g,{pending:w,error:y,success:p}=s;w&&(g=ye(w)?V.loading(w,d):V.loading(w.render,{...d,...w}));const I={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},A=(_,v,E)=>{if(v==null)return void V.dismiss(g);const B={type:_,...I,...d,data:E},R=ye(v)?{render:v}:v;return g?V.update(g,{...B,...R}):V(R.render,{...B,...R}),E},C=oe(n)?n():n;return C.then(_=>A("success",p,_)).catch(_=>A("error",y,_)),C},V.success=De("success"),V.info=De("info"),V.error=De("error"),V.warning=De("warning"),V.warn=V.warning,V.dark=(n,s)=>xe(n,Oe("default",{theme:"dark",...s})),V.dismiss=function(n){(function(s){var d;if(Ot()){if(s==null||ye(d=s)||Se(d))Z.forEach(g=>{g.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){const g=Z.get(s.containerId);g?g.removeToast(s.id):Z.forEach(w=>{w.removeToast(s.id)})}}else Te=Te.filter(g=>s!=null&&g.options.toastId!==s)})(n)},V.clearWaitingQueue=function(n){n===void 0&&(n={}),Z.forEach(s=>{!s.props.limit||n.containerId&&s.id!==n.containerId||s.clearQueue()})},V.isActive=Mt,V.update=function(n,s){s===void 0&&(s={});const d=((g,w)=>{var y;let{containerId:p}=w;return(y=Z.get(p||1))==null?void 0:y.toasts.get(g)})(n,s);if(d){const{props:g,content:w}=d,y={delay:100,...g,...s,toastId:s.toastId||n,updateId:kt()};y.toastId!==n&&(y.staleId=n);const p=y.render||w;delete y.render,xe(p,y)}},V.done=n=>{V.update(n,{progress:1})},V.onChange=function(n){return Je.add(n),()=>{Je.delete(n)}},V.play=n=>Nt(!0,n),V.pause=n=>Nt(!1,n);const vn=typeof window<"u"?j.useLayoutEffect:j.useEffect,Pe=n=>{let{theme:s,type:d,isLoading:g,...w}=n;return Y.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${d})`,...w})},qe={info:function(n){return Y.createElement(Pe,{...n},Y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(n){return Y.createElement(Pe,{...n},Y.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(n){return Y.createElement(Pe,{...n},Y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(n){return Y.createElement(Pe,{...n},Y.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Y.createElement("div",{className:"Toastify__spinner"})}},hn=n=>{const{isRunning:s,preventExitTransition:d,toastRef:g,eventHandlers:w,playToast:y}=un(n),{closeButton:p,children:I,autoClose:A,onClick:C,type:_,hideProgressBar:v,closeToast:E,transition:B,position:R,className:N,style:D,bodyClassName:O,bodyStyle:S,progressClassName:P,progressStyle:k,updateId:m,role:M,progress:T,rtl:b,toastId:L,deleteToast:H,isIn:W,isLoading:G,closeOnClick:K,theme:ee}=n,se=pe("Toastify__toast",`Toastify__toast-theme--${ee}`,`Toastify__toast--${_}`,{"Toastify__toast--rtl":b},{"Toastify__toast--close-on-click":K}),le=oe(N)?N({rtl:b,position:R,type:_,defaultClassName:se}):pe(se,N),J=function(q){let{theme:re,type:te,isLoading:ne,icon:ae}=q,ue=null;const ge={theme:re,type:te};return ae===!1||(oe(ae)?ue=ae({...ge,isLoading:ne}):j.isValidElement(ae)?ue=j.cloneElement(ae,ge):ne?ue=qe.spinner():(Fe=>Fe in qe)(te)&&(ue=qe[te](ge))),ue}(n),ce=!!T||!A,fe={closeToast:E,type:_,theme:ee};let de=null;return p===!1||(de=oe(p)?p(fe):j.isValidElement(p)?j.cloneElement(p,fe):function(q){let{closeToast:re,theme:te,ariaLabel:ne="close"}=q;return Y.createElement("button",{className:`Toastify__close-button Toastify__close-button--${te}`,type:"button",onClick:ae=>{ae.stopPropagation(),re(ae)},"aria-label":ne},Y.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Y.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(fe)),Y.createElement(B,{isIn:W,done:H,position:R,preventExitTransition:d,nodeRef:g,playToast:y},Y.createElement("div",{id:L,onClick:C,"data-in":W,className:le,...w,style:D,ref:g},Y.createElement("div",{...W&&{role:M},className:oe(O)?O({type:_}):pe("Toastify__toast-body",O),style:S},J!=null&&Y.createElement("div",{className:pe("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!G})},J),Y.createElement("div",null,I)),de,Y.createElement(ln,{...m&&!ce?{key:`pb-${m}`}:{},rtl:b,theme:ee,delay:A,isRunning:s,isIn:W,closeToast:E,hide:v,type:_,style:k,className:P,controlledProgress:ce,progress:T||0})))},ke=function(n,s){return s===void 0&&(s=!1),{enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:s}},mn=$e(ke("bounce",!0));$e(ke("slide",!0));$e(ke("zoom"));$e(ke("flip"));const pn={position:"top-right",transition:mn,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function gn(n){let s={...pn,...n};const d=n.stacked,[g,w]=j.useState(!0),y=j.useRef(null),{getToastToRender:p,isToastActive:I,count:A}=cn(s),{className:C,style:_,rtl:v,containerId:E}=s;function B(N){const D=pe("Toastify__toast-container",`Toastify__toast-container--${N}`,{"Toastify__toast-container--rtl":v});return oe(C)?C({position:N,rtl:v,defaultClassName:D}):pe(D,Le(C))}function R(){d&&(w(!0),V.play())}return vn(()=>{if(d){var N;const D=y.current.querySelectorAll('[data-in="true"]'),O=12,S=(N=s.position)==null?void 0:N.includes("top");let P=0,k=0;Array.from(D).reverse().forEach((m,M)=>{const T=m;T.classList.add("Toastify__toast--stacked"),M>0&&(T.dataset.collapsed=`${g}`),T.dataset.pos||(T.dataset.pos=S?"top":"bot");const b=P*(g?.2:1)+(g?0:O*M);T.style.setProperty("--y",`${S?b:-1*b}px`),T.style.setProperty("--g",`${O}`),T.style.setProperty("--s",""+(1-(g?k:0))),P+=T.offsetHeight,k+=.025})}},[g,A,d]),Y.createElement("div",{ref:y,className:"Toastify",id:E,onMouseEnter:()=>{d&&(w(!1),V.pause())},onMouseLeave:R},p((N,D)=>{const O=D.length?{..._}:{..._,pointerEvents:"none"};return Y.createElement("div",{className:B(N),style:O,key:`container-${N}`},D.map(S=>{let{content:P,props:k}=S;return Y.createElement(hn,{...k,stacked:d,collapseAll:R,isIn:I(k.toastId,k.containerId),style:k.style,key:`toast-${k.key}`},P)}))}))}var rt={},yn=tt;Object.defineProperty(rt,"__esModule",{value:!0});var Ft=rt.default=void 0,bn=yn(et()),_n=z,En=(0,bn.default)((0,_n.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");Ft=rt.default=En;var nt={},wn=tt;Object.defineProperty(nt,"__esModule",{value:!0});var zt=nt.default=void 0,In=wn(et()),xn=z,Sn=(0,In.default)((0,xn.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen");zt=nt.default=Sn;var ot={},Tn=tt;Object.defineProperty(ot,"__esModule",{value:!0});var jt=ot.default=void 0,Cn=Tn(et()),Rn=z,An=(0,Cn.default)((0,Rn.jsx)("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}),"FullscreenExit");jt=ot.default=An;const Nn=({position:n={bottom:"20px",right:"20px"}})=>{const[s,d]=en(),[g,w]=j.useState(!1),[y,p]=j.useState(!1);j.useEffect(()=>{s.error&&(V.error(s.error),d({type:"SET_ERROR",payload:""}))},[s.error]),j.useEffect(()=>{nn(s,d),on(s,d)},[s,d]);const I=()=>w(!g),A=()=>p(!y);return z.jsxs(z.Fragment,{children:[z.jsx(gn,{position:"top-center",autoClose:5e3,theme:"colored"}),!g&&z.jsx(zr,{onClick:I,sx:{position:"fixed",bottom:n.bottom,right:n.right,bgcolor:"primary.main",color:"white",width:64,height:64,borderRadius:"50%",boxShadow:3,zIndex:50},children:z.jsx(Ft,{fontSize:"large"})}),g&&z.jsx(_e,{sx:{position:"fixed",inset:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:y?"rgba(0, 0, 0, 0.5)":"transparent",backdropFilter:y?"blur(5px)":"none",zIndex:999999},children:z.jsxs(_e,{sx:{width:y?"100%":"80%",height:y?"100%":"60%",maxWidth:"50%",bgcolor:"background.paper",borderRadius:2,overflow:"hidden",boxShadow:3,position:"fixed",bottom:y?"unset":n.bottom,right:y?"unset":n.right},children:[z.jsxs(_e,{sx:{display:"flex",alignItems:"center",p:1,bgcolor:"primary.main",color:"white"},children:[z.jsx(Qe,{sx:{flexGrow:1},children:"Chatbot Assistant"}),z.jsx(xt,{onClick:A,sx:{color:"white"},children:y?z.jsx(jt,{}):z.jsx(zt,{})}),z.jsx(xt,{onClick:I,sx:{color:"white"},children:z.jsx(jr,{})})]}),z.jsx(_e,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"auto",p:2},children:s.isApiTyping?z.jsx(_e,{sx:{display:"flex",justifyContent:"center",mt:2},children:z.jsx(Kr,{size:16})}):z.jsx(Qe,{children:"Chat content goes here..."})}),z.jsx(_e,{component:"footer",sx:{p:2,display:"flex",justifyContent:"center",alignItems:"center",bgcolor:"grey.100",borderTop:1,borderColor:"grey.300"},children:z.jsxs(Qe,{variant:"body2",color:"textSecondary",children:[" ",new Date().getFullYear()," CriticalFuture. Made by"," ",z.jsx("a",{href:"https://criticalfutureglobal.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CriticalFuture"})]})})]})})]})},Dn={assistant:{name:"Mai",description:"Critical Future Chatbot Assistant",welcomeMessage:"Hello! How can I assist you today?",voiceName:"en-GB-SoniaNeural",avatar:{staticUrl:"https://raw.githubusercontent.com/Critical-Future-LLM-in-a-Box/llminaboxchatbots/main/Avatars/mai/mai.png",liveUrl:"https://raw.githubusercontent.com/Critical-Future-LLM-in-a-Box/llminaboxchatbots/main/Avatars/mai/mai-new.gif",videoUrl:"https://github.com/Critical-Future-LLM-in-a-Box/llminaboxchatbots/raw/main/Avatars/mai/Mai%20intro%20V0.2%20(sonia%20voice).mp4"}},api:{apiHost:"https://llm.criticalfutureglobal.com",chatflowId:"95e01dd4-ff2f-4055-a6f1-3cfc35261831",authToken:""},session:{chatId:localStorage.getItem("chatid")??Math.random().toString().substring(2,12),chats:JSON.parse(localStorage.getItem("chats")??"[]"),memory:!0},ui:{backgroundColor:"#F8F8FF",foregroundColor:"#000000",width:"100%",height:"100%"}};function Pn(n=Dn){let s=document.querySelector("llminabox");s||(s=document.createElement("llminabox"),document.body.appendChild(s)),Ur.createRoot(s).render(z.jsx(Zr,{config:n,children:z.jsx(Nn,{position:{bottom:"20px",right:"20px"}})}))}Pn();
